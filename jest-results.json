{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":18,"numPassedTests":86,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":19,"numTotalTests":87,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1769625533589,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["initializeTilePopulations (storage-first)"],"duration":445,"failureDetails":[{}],"failureMessages":["TypeError: Cannot set properties of undefined (setting 'family_id')\n    at _callee4$ (C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\operations.js:361:40)\n    at call (C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\operations.js:2:1)\n    at Generator.s (C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\operations.js:2:1)\n    at Generator._invoke [as next] (C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\operations.js:2:1)\n    at asyncGeneratorStep (C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\operations.js:2:1)\n    at asyncGeneratorStep (C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\operations.js:2:1)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"initializeTilePopulations (storage-first) creates populations on selected tiles and indexes people into village sets","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"creates populations on selected tiles and indexes people into village sets"}],"endTime":1769625536984,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1minitializeTilePopulations (storage-first) › creates populations on selected tiles and indexes people into village sets\u001b[39m\u001b[22m\n\n    TypeError: Cannot set properties of undefined (setting 'family_id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 359 |\u001b[39m                     \u001b[36mfor\u001b[39m (\u001b[36mlet\u001b[39m c \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m c \u001b[33m<\u001b[39m childrenCounts[f]\u001b[33m;\u001b[39m c\u001b[33m++\u001b[39m) {\u001b[22m\n\u001b[2m     \u001b[90m 360 |\u001b[39m                         \u001b[36mconst\u001b[39m child \u001b[33m=\u001b[39m minors[minorIdx\u001b[33m++\u001b[39m]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 361 |\u001b[39m                         child\u001b[33m.\u001b[39mfamily_id \u001b[33m=\u001b[39m tileFamilies[f]\u001b[33m.\u001b[39mid\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 362 |\u001b[39m                         tileFamilies[f]\u001b[33m.\u001b[39mchildren_ids\u001b[33m.\u001b[39mpush(child\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 363 |\u001b[39m                     }\u001b[22m\n\u001b[2m     \u001b[90m 364 |\u001b[39m                 }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat _callee4$ (\u001b[22m\u001b[2mserver/services/population/operations.js\u001b[2m:361:40)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat call (\u001b[22m\u001b[2mserver/services/population/operations.js\u001b[2m:2:1)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Generator.s (\u001b[22m\u001b[2mserver/services/population/operations.js\u001b[2m:2:1)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Generator._invoke [as next] (\u001b[22m\u001b[2mserver/services/population/operations.js\u001b[2m:2:1)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat asyncGeneratorStep (\u001b[22m\u001b[2mserver/services/population/operations.js\u001b[2m:2:1)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat asyncGeneratorStep (\u001b[22m\u001b[2mserver/services/population/operations.js\u001b[2m:2:1)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\__tests__\\initializeTilePopulations.test.js","startTime":1769625533849,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":1229,"failureDetails":[],"failureMessages":[],"fullName":"StateManager.loadFromDatabase is called on init and on storage ready event","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"StateManager.loadFromDatabase is called on init and on storage ready event"}],"endTime":1769625538436,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\__tests__\\storageReady.test.js","startTime":1769625537050,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"noop","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"noop"}],"endTime":1769625538667,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\__tests__\\jestGlobalTeardown.js","startTime":1769625538461,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["lock (memory adapter fallback)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"lock (memory adapter fallback) acquire and release succesful","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"acquire and release succesful"},{"ancestorTitles":["lock (memory adapter fallback)"],"duration":210,"failureDetails":[],"failureMessages":[],"fullName":"lock (memory adapter fallback) concurrent acquire is blocked","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"concurrent acquire is blocked"},{"ancestorTitles":["lock (memory adapter fallback)"],"duration":84,"failureDetails":[],"failureMessages":[],"fullName":"lock (memory adapter fallback) lock expires and allows reacquire","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"lock expires and allows reacquire"}],"endTime":1769625539259,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\utils\\__tests__\\lock.test.js","startTime":1769625538692,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Data Operations Lifecycle Integration","Complete Load-Save Cycle"],"duration":158,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Complete Load-Save Cycle successful load and save cycle with data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"successful load and save cycle with data"},{"ancestorTitles":["Data Operations Lifecycle Integration","Complete Load-Save Cycle"],"duration":70,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Complete Load-Save Cycle handles load failure and save recovery","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles load failure and save recovery"},{"ancestorTitles":["Data Operations Lifecycle Integration","Complete Load-Save Cycle"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Complete Load-Save Cycle data formatting works throughout lifecycle","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"data formatting works throughout lifecycle"},{"ancestorTitles":["Data Operations Lifecycle Integration","Error Recovery Scenarios"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Error Recovery Scenarios load recovers from storage failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"load recovers from storage failure"},{"ancestorTitles":["Data Operations Lifecycle Integration","Error Recovery Scenarios"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Error Recovery Scenarios save handles partial failures gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"save handles partial failures gracefully"},{"ancestorTitles":["Data Operations Lifecycle Integration","Error Recovery Scenarios"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Error Recovery Scenarios calendar integration during load/save","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"calendar integration during load/save"},{"ancestorTitles":["Data Operations Lifecycle Integration","Data Consistency Checks"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Data Consistency Checks load and format produce consistent results","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"load and format produce consistent results"},{"ancestorTitles":["Data Operations Lifecycle Integration","Data Consistency Checks"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Data Operations Lifecycle Integration Data Consistency Checks empty data states are handled consistently","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"empty data states are handled consistently"}],"endTime":1769625539819,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\__tests__\\dataLifecycle.integration.test.js","startTime":1769625539270,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":197,"failureDetails":[],"failureMessages":[],"fullName":"createFamily creates one family when called concurrently for the same couple","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"createFamily creates one family when called concurrently for the same couple"}],"endTime":1769625540282,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\__tests__\\familyManager.integration.test.js","startTime":1769625539918,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Population lifecycle"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle startPregnancy sets pregnancy and delivery_date when wife is young enough","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"startPregnancy sets pregnancy and delivery_date when wife is young enough"},{"ancestorTitles":["Population lifecycle"],"duration":77,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle startPregnancy throws when wife too old","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"startPregnancy throws when wife too old"},{"ancestorTitles":["Population lifecycle"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle deliverBaby adds baby and updates family","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"deliverBaby adds baby and updates family"},{"ancestorTitles":["Population lifecycle"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle processDeliveries delivers babies for due families","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"processDeliveries delivers babies for due families"},{"ancestorTitles":["Population lifecycle"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle formNewFamilies pairs eligible males and females and can start pregnancy immediately","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"formNewFamilies pairs eligible males and females and can start pregnancy immediately"},{"ancestorTitles":["Population lifecycle"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle applySenescence removes aged people and updates families","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"applySenescence removes aged people and updates families"},{"ancestorTitles":["Population lifecycle"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Population lifecycle processDailyFamilyEvents starts pregnancies from eligible set and releases adults","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"processDailyFamilyEvents starts pregnancies from eligible set and releases adults"}],"endTime":1769625540609,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\__tests__\\lifecycle.test.js","startTime":1769625540300,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["saveOperations helpers"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers processFamilyDeletes removes eligible sets and executes expected DB queries","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"processFamilyDeletes removes eligible sets and executes expected DB queries"},{"ancestorTitles":["saveOperations helpers"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingVillages inserts pending villages and calls reassign","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"insertPendingVillages inserts pending villages and calls reassign"},{"ancestorTitles":["saveOperations helpers"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers processPeopleDeletes runs DELETE query and returns count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"processPeopleDeletes runs DELETE query and returns count"},{"ancestorTitles":["saveOperations helpers"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers emitPopulationUpdate calls PopStats and emits to io","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"emitPopulationUpdate calls PopStats and emits to io"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies inserts families with valid husband and wife IDs","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"inserts families with valid husband and wife IDs"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies sets husband_id and wife_id to null when people do not exist","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"sets husband_id and wife_id to null when people do not exist"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies handles negative IDs correctly (new people)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles negative IDs correctly (new people)"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies handles empty pending inserts","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"handles empty pending inserts"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":64,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies handles database errors during existence checks","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles database errors during existence checks"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies reserve inserts families without existence checks","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"reserve inserts families without existence checks"},{"ancestorTitles":["saveOperations helpers","insertPendingFamilies"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers insertPendingFamilies reserve + people insert + updateFamilyReferences sets husband/wife after person insert","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"reserve + people insert + updateFamilyReferences sets husband/wife after person insert"},{"ancestorTitles":["saveOperations helpers","updateFamilyReferences"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers updateFamilyReferences updates family references with mapped IDs","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"updates family references with mapped IDs"},{"ancestorTitles":["saveOperations helpers","updateFamilyReferences"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers updateFamilyReferences skips update when no mappings provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"skips update when no mappings provided"},{"ancestorTitles":["saveOperations helpers","updateFamilyReferences"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"saveOperations helpers updateFamilyReferences handles families not found in storage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles families not found in storage"}],"endTime":1769625540975,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\stateManager\\__tests__\\saveOperations.test.js","startTime":1769625540637,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"processPeopleDeletes issues delete query","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"processPeopleDeletes issues delete query"}],"endTime":1769625541281,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\stateManager\\__tests__\\parts\\people.test.js","startTime":1769625541115,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase loads data successfully with calendar paused","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"loads data successfully with calendar paused"},{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase skips loading when calendar cannot be paused","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"skips loading when calendar cannot be paused"},{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase skips loading when storage unavailable","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"skips loading when storage unavailable"},{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase handles empty database results","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"handles empty database results"},{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":43,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase handles database query errors gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles database query errors gracefully"},{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase handles storage operation failures","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"handles storage operation failures"},{"ancestorTitles":["loadOperations","loadFromDatabase"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"loadOperations loadFromDatabase emits load event on success","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"emits load event on success"}],"endTime":1769625541536,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\stateManager\\__tests__\\loadOperations.test.js","startTime":1769625541294,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["IdAllocator","getNextId"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getNextId allocates IDs from Postgres sequence when pool is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"allocates IDs from Postgres sequence when pool is empty"},{"ancestorTitles":["IdAllocator","getNextId"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getNextId uses cached IDs when pool has available IDs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"uses cached IDs when pool has available IDs"},{"ancestorTitles":["IdAllocator","getNextId"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getNextId refills pool when exhausted","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"refills pool when exhausted"},{"ancestorTitles":["IdAllocator","getIdBatch"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getIdBatch returns array of sequential IDs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns array of sequential IDs"},{"ancestorTitles":["IdAllocator","getIdBatch"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getIdBatch allocates larger block when batch size exceeds default","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"allocates larger block when batch size exceeds default"},{"ancestorTitles":["IdAllocator","entity-specific methods"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator entity-specific methods getNextFamilyId uses family sequence","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"getNextFamilyId uses family sequence"},{"ancestorTitles":["IdAllocator","entity-specific methods"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator entity-specific methods getNextVillageId uses villages sequence","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"getNextVillageId uses villages sequence"},{"ancestorTitles":["IdAllocator","getPoolStatus"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getPoolStatus returns pool status for valid entity type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns pool status for valid entity type"},{"ancestorTitles":["IdAllocator","getPoolStatus"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getPoolStatus returns null for unknown entity type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns null for unknown entity type"},{"ancestorTitles":["IdAllocator","getAllPoolStatus"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator getAllPoolStatus returns status for all pools","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"returns status for all pools"},{"ancestorTitles":["IdAllocator","error handling"],"duration":41,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator error handling throws on unknown entity type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"throws on unknown entity type"},{"ancestorTitles":["IdAllocator","error handling"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"IdAllocator error handling propagates database errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"propagates database errors"}],"endTime":1769625541877,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\__tests__\\idAllocator.test.js","startTime":1769625541599,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CalendarService"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService initialize loads DB state and persists default when missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"initialize loads DB state and persists default when missing"},{"ancestorTitles":["CalendarService"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService start and stop lifecycle","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"start and stop lifecycle"},{"ancestorTitles":["CalendarService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService advanceOneDay triggers month and year rollovers and emits events","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"advanceOneDay triggers month and year rollovers and emits events"},{"ancestorTitles":["CalendarService"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService tick advances multiple days according to speed and emits tick","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"tick advances multiple days according to speed and emits tick"},{"ancestorTitles":["CalendarService"],"duration":60,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService setDate validates and updates date and total days","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"setDate validates and updates date and total days"},{"ancestorTitles":["CalendarService"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService setSpeed accepts valid speeds and rejects invalid ones","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"setSpeed accepts valid speeds and rejects invalid ones"},{"ancestorTitles":["CalendarService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService calculateTotalDays and getFormattedDate work as expected","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"calculateTotalDays and getFormattedDate work as expected"},{"ancestorTitles":["CalendarService"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CalendarService subscribe returns unsubscribe and initial callback is invoked","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"subscribe returns unsubscribe and initial callback is invoked"}],"endTime":1769625542146,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\__tests__\\calendarService.test.js","startTime":1769625541902,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["dataOperations","loadPopulationData"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations loadPopulationData loads from storage when available and has data","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"loads from storage when available and has data"},{"ancestorTitles":["dataOperations","loadPopulationData"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations loadPopulationData falls back to Postgres when storage fails","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"falls back to Postgres when storage fails"},{"ancestorTitles":["dataOperations","loadPopulationData"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations loadPopulationData falls back to Postgres when storage has no data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"falls back to Postgres when storage has no data"},{"ancestorTitles":["dataOperations","loadPopulationData"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations loadPopulationData uses Postgres directly when storage unavailable","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"uses Postgres directly when storage unavailable"},{"ancestorTitles":["dataOperations","loadPopulationData"],"duration":36,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations loadPopulationData returns empty object on database error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns empty object on database error"},{"ancestorTitles":["dataOperations","loadPopulationData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations loadPopulationData handles empty result set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles empty result set"},{"ancestorTitles":["dataOperations","savePopulationData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations savePopulationData successfully saves data and returns result","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"successfully saves data and returns result"},{"ancestorTitles":["dataOperations","savePopulationData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations savePopulationData returns error object on save failure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns error object on save failure"},{"ancestorTitles":["dataOperations","formatPopulationData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations formatPopulationData formats population data with provided data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"formats population data with provided data"},{"ancestorTitles":["dataOperations","formatPopulationData"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations formatPopulationData formats population data with null input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"formats population data with null input"},{"ancestorTitles":["dataOperations","formatPopulationData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"dataOperations formatPopulationData includes valid ISO timestamp","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"includes valid ISO timestamp"}],"endTime":1769625542369,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\population\\__tests__\\dataOperations.test.js","startTime":1769625542155,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["FamilyState (memory adapter)"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"FamilyState (memory adapter) addFamily, getAllFamilies, pending inserts","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"addFamily, getAllFamilies, pending inserts"},{"ancestorTitles":["FamilyState (memory adapter)"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"FamilyState (memory adapter) fertile family set operations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"fertile family set operations"},{"ancestorTitles":["FamilyState (memory adapter)"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"FamilyState (memory adapter) reassignIds updates family and people writes without throwing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"reassignIds updates family and people writes without throwing"}],"endTime":1769625542596,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\populationState\\__tests__\\FamilyState.test.js","startTime":1769625542387,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PeopleState (memory adapter)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PeopleState (memory adapter) addPerson and getAllPeople and pending inserts","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"addPerson and getAllPeople and pending inserts"},{"ancestorTitles":["PeopleState (memory adapter)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"PeopleState (memory adapter) updatePerson changes residency and pending updates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"updatePerson changes residency and pending updates"},{"ancestorTitles":["PeopleState (memory adapter)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PeopleState (memory adapter) removePerson removes and updates counts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"removePerson removes and updates counts"}],"endTime":1769625542877,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\populationState\\__tests__\\PeopleState.test.js","startTime":1769625542630,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["VillagePopulationState (memory adapter)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"VillagePopulationState (memory adapter) next temp id and pending inserts","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"next temp id and pending inserts"},{"ancestorTitles":["VillagePopulationState (memory adapter)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"VillagePopulationState (memory adapter) reassignIds moves village and cleared counts","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"reassignIds moves village and cleared counts"}],"endTime":1769625543036,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\populationState\\__tests__\\VillagePopulationState.test.js","startTime":1769625542886,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["BOILERPLATE: simple counter using MemoryAdapter"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"BOILERPLATE: simple counter using MemoryAdapter increments a counter by 1","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"increments a counter by 1"},{"ancestorTitles":["BOILERPLATE: simple counter using MemoryAdapter"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BOILERPLATE: simple counter using MemoryAdapter increments multiple times","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"increments multiple times"}],"endTime":1769625543186,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\__tests__\\boilerplate.test.js","startTime":1769625543046,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"insertPendingVillages inserts and calls reassign","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"insertPendingVillages inserts and calls reassign"}],"endTime":1769625543346,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\stateManager\\__tests__\\parts\\villages.test.js","startTime":1769625543195,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"processFamilyDeletes removes sets and issues DB queries","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"processFamilyDeletes removes sets and issues DB queries"}],"endTime":1769625543501,"message":"","name":"C:\\Users\\giaco\\OneDrive\\Documenti\\github\\GridWorld\\server\\services\\stateManager\\__tests__\\parts\\families.test.js","startTime":1769625543357,"status":"passed","summary":""}],"wasInterrupted":false}
